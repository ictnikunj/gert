!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/bundles/jkwebshopwarecategorylistingplugin/",n(n.s="8AjB")}({"0GUS":function(e,t,n){var i=n("LFGQ");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n("SZ7m").default)("4cad8aac",i,!0,{})},"4tY2":function(e,t,n){},"68nV":function(e){e.exports=JSON.parse('{"sw-cms":{"blocks":{"commerce":{"categoryListing":{"label":"Category listing"}}},"elements":{"categoryListing":{"label":"Category listing (select)","config":{"helpText":"The Layout of this element be changed in a custom twig tempalte.","infoText":"This element\'s category data is automatically loaded by the currently selected category. The content just shows a sample preview.","categoryLabel":"Categories","rowClassNameLabel":"CSS class name of row element","colClassNameLabel":"CSS class name of col element","categoryPlaceholder":"Choose categories","categoryHelpText":"Ordering is equal to the order of adding categories. If no category selected subcategories of the current page will be displayed","headingPositionLabel":"Heading position","headingPosition":{"top":"Top","bottom":"Bottom","overlay":"Overlay"}}}}}}')},"6RjJ":function(e){e.exports=JSON.parse('{"sw-cms":{"blocks":{"commerce":{"categoryListing":{"label":"Kategorie-Listing"}}},"elements":{"categoryListing":{"label":"Kategorie-Listing","config":{"helpText":"Das Layout dieses Elements kann mit einem manuellen Twig-Template angepasst werden.","infoText":"Die Kategoriedaten für dieses Element werden automatisiert über die aktuelle Kategorie geladen. Der Inhalt zeigt nur eine ungefähre Vorschau.","categoryLabel":"Kategorien","rowClassNameLabel":"CSS Klassenname des Zeilen-Elements","colClassNameLabel":"CSS Klassenname des Spalten-Elements","categoryPlaceholder":"Ausgewählte Kategorien","categoryHelpText":"Sortierung gleich wie die Reihenfolge des Hinzufügens. Wenn keine Kategorien ausgewählt wurden werden die Unterkategorien der aktuellen Seite angezeigt.","headingPositionLabel":"Position der Überschrift","headingPosition":{"top":"Oben","bottom":"Unten","overlay":"Overlay"}}}}}}')},"8AjB":function(e,t,n){"use strict";n.r(t);var i=n("6RjJ"),o=n("68nV");n("htEg");Shopware.Component.register("sw-cms-block-category-listing",{template:'{% block sw_cms_block_category_listing %}\n    <div class="sw-cms-block-category-listing">\n        <slot name="content">\n            {% block sw_cms_block_category_listing_slot_content %}{% endblock %}\n        </slot>\n    </div>\n{% endblock %}\n'});n("xdAn");Shopware.Component.register("sw-cms-preview-category-listing",{template:'{% block sw_cms_block_preview_category_listing %}\n    <div class="sw-cms-preview-category-listing">\n        <div v-for="i in 3" :key="i">\n            <img :src="\'/administration/static/img/cms/preview_mountain_small.jpg\' | asset">\n            <h2>Lorem ipsum</h2>\n        </div>\n    </div>\n{% endblock %}\n'}),Shopware.Service("cmsService").registerCmsBlock({name:"category-listing",label:"sw-cms.blocks.commerce.categoryListing.label",category:"commerce",component:"sw-cms-block-category-listing",previewComponent:"sw-cms-preview-category-listing",defaultConfig:{marginBottom:"0",marginTop:"0",marginLeft:"0",marginRight:"0",sizingMode:"boxed"},slots:{content:"category-listing"}});n("0GUS");var s=Shopware.Data,a=s.Criteria,l=s.EntityCollection;Shopware.Component.register("sw-cms-el-category-listing",{template:'{% block sw_cms_element_category_listing %}\n    <div class="sw-cms-el-category-listing">\n        <div v-if="!element.config.categories.value.length" class="sw-cms-el-child-listing">\n            <div v-for="i in 3" :key="i">\n                <img  class="sw-cms-el-child-listing-img" :src="\'/administration/static/img/cms/preview_mountain_small.jpg\' | asset">\n                <div class="sw-cms-el-child-listing-title-placeholder title"></div>\n                <div v-for="j in 3" :key="j" class="sw-cms-el-child-listing-title-placeholder small"></div>\n            </div>\n        </div>\n        <div v-else :class="element.config.rowElementClassName.value">\n            <div v-for="category in element.data.categories" :class="element.config.colElementClassName.value">\n                <div class="sw-cms-el-category-listing-item">\n                    <h2>{{ category.name }}</h2>\n                    <img v-if="category.media" :src="category.media.url"/>\n                </div>\n            </div>\n        </div>\n    </div>\n{% endblock %}\n',inject:["repositoryFactory"],mixins:[Shopware.Mixin.getByName("cms-element")],computed:{categoryRepository:function(){return this.repositoryFactory.create("category")}},data:function(){return{categoryCollection:null,context:Shopware.Context.api}},created:function(){var e=this;if(this.initElementConfig("category-listing"),this.categoryCollection=new l("/category","category",this.context),this.element.config.categories.value.length>0){var t=new a(1,100);t.addAssociation("media"),t.setIds(this.element.config.categories.value),this.categoryRepository.search(t,Object.assign({},this.context,{inheritance:!0})).then((function(t){e.categoryCollection=t,e.updateCategoriesDataValue()}))}},methods:{updateCategoriesDataValue:function(){if(this.element.config.categories.value){var e=[];this.categoryCollection.forEach((function(t){e.push(t)})),this.$set(this.element.data,"categories",e)}}}});n("Qcgj");Shopware.Component.register("sw-cms-el-preview-category-listing",{template:'{% block sw_cms_element_preview_category_listing %}\n    <div class="sw-cms-el-preview-category-listing">\n        <div v-for="i in 3" :key="i">\n            <img  class="sw-cms-el-preview-category-listing-img" :src="\'/administration/static/img/cms/preview_mountain_small.jpg\' | asset">\n            <div class="sw-cms-el-preview-category-listing-title-placeholder title"></div>\n            <div v-for="j in 3" :key="j" class="sw-cms-el-preview-category-listing-title-placeholder small"></div>\n        </div>\n    </div>\n{% endblock %}\n'});n("oFy7");var r=Shopware.Data,c=r.Criteria,g=r.EntityCollection;Shopware.Component.register("sw-cms-el-config-category-listing",{template:'{% block sw_cms_element_config_category_listing %}\n    <div class="sw-cms-el-config-category-listing">\n\n        <div class="sw-cms-el-config-category-listing-form">\n            <sw-entity-multi-select\n                class="sw-cms-el-config-category-listing-categories"\n                v-model="categoryCollection"\n                @change="onCategoryChange"\n                :label="$tc(\'sw-cms.elements.categoryListing.config.categoryLabel\')"\n                :placeholder="$tc(\'sw-cms.elements.categoryListing.config.categoryPlaceholder\')"\n                :help-text="$tc(\'sw-cms.elements.categoryListing.config.categoryHelpText\')"\n            >\n            </sw-entity-multi-select>\n\n            <sw-field class="sw-cms-el-config-category-listing-row-name"\n                      v-model="element.config.rowElementClassName.value"\n                      type="text"\n                      :label="$tc(\'sw-cms.elements.categoryListing.config.rowClassNameLabel\')">\n            </sw-field>\n\n            <sw-field class="sw-cms-el-config-category-listing-col-name"\n                      v-model="element.config.colElementClassName.value"\n                      type="text"\n                      :label="$tc(\'sw-cms.elements.categoryListing.config.colClassNameLabel\')">\n            </sw-field>\n\n            <sw-single-select\n                size="medium"\n                :options="headingPositionValues"\n                v-model="element.config.headingPosition.value"\n                :label="$tc(\'sw-cms.elements.categoryListing.config.headingPositionLabel\')">>\n            </sw-single-select>\n        </div>\n\n        <sw-alert variant="info">{{ $tc(\'sw-cms.elements.categoryListing.config.infoText\') }}</sw-alert>\n\n        <p>{{ $tc(\'sw-cms.elements.categoryListing.config.helpText\') }}</p>\n        <code>@Storefront/storefront/element/cms-element-category-listing.html.twig</code>\n\n    </div>\n{% endblock %}\n',inject:["repositoryFactory"],mixins:[Shopware.Mixin.getByName("cms-element")],computed:{categoryRepository:function(){return this.repositoryFactory.create("category")}},data:function(){return{categoryCollection:null,context:Shopware.Context.api,headingPositionValues:[{label:this.$tc("sw-cms.elements.categoryListing.config.headingPosition.top"),value:"top"},{label:this.$tc("sw-cms.elements.categoryListing.config.headingPosition.bottom"),value:"bottom"},{label:this.$tc("sw-cms.elements.categoryListing.config.headingPosition.overlay"),value:"overlay"}]}},created:function(){this.initElementConfig("category-listing"),this.categoryCollection=new g("/category","category",this.context),this.reloadCategoryCollection()},methods:{onCategoryChange:function(){this.element.config.categories.value=this.categoryCollection.getIds(),this.updateCategoriesDataValue()},reloadCategoryCollection:function(e){var t=this;if(this.element.config.categories.value.length>0){var n=new c(1,100);n.addAssociation("media"),n.setIds(this.element.config.categories.value),this.categoryRepository.search(n,Object.assign({},this.context,{inheritance:!0})).then((function(n){t.categoryCollection=n,e&&e()}))}},updateCategoriesDataValue:function(){var e=this;this.element.config.categories.value?this.reloadCategoryCollection((function(){var t=[];e.categoryCollection.forEach((function(e){t.push(e)})),e.$set(e.element.data,"categories",t)})):this.$set(this.element.data,"categories",[])}}}),Shopware.Service("cmsService").registerCmsElement({name:"category-listing",label:"sw-cms.elements.categoryListing.label",component:"sw-cms-el-category-listing",configComponent:"sw-cms-el-config-category-listing",previewComponent:"sw-cms-el-preview-category-listing",defaultConfig:{categories:{source:"mapped",value:[]},rowElementClassName:{source:"static",value:"row"},colElementClassName:{source:"static",value:"col-md-6 col-lg-4"},headingPosition:{source:"static",value:"top"}}}),Shopware.Locale.extend("de-DE",i),Shopware.Locale.extend("en-GB",o)},LFGQ:function(e,t,n){},Qcgj:function(e,t,n){var i=n("mcaA");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n("SZ7m").default)("06f5fdd6",i,!0,{})},SZ7m:function(e,t,n){"use strict";function i(e,t){for(var n=[],i={},o=0;o<t.length;o++){var s=t[o],a=s[0],l={id:e+":"+o,css:s[1],media:s[2],sourceMap:s[3]};i[a]?i[a].parts.push(l):n.push(i[a]={id:a,parts:[l]})}return n}n.r(t),n.d(t,"default",(function(){return f}));var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var s={},a=o&&(document.head||document.getElementsByTagName("head")[0]),l=null,r=0,c=!1,g=function(){},m=null,d="data-vue-ssr-id",u="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(e,t,n,o){c=n,m=o||{};var a=i(e,t);return p(a),function(t){for(var n=[],o=0;o<a.length;o++){var l=a[o];(r=s[l.id]).refs--,n.push(r)}t?p(a=i(e,t)):a=[];for(o=0;o<n.length;o++){var r;if(0===(r=n[o]).refs){for(var c=0;c<r.parts.length;c++)r.parts[c]();delete s[r.id]}}}}function p(e){for(var t=0;t<e.length;t++){var n=e[t],i=s[n.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](n.parts[o]);for(;o<n.parts.length;o++)i.parts.push(h(n.parts[o]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{var a=[];for(o=0;o<n.parts.length;o++)a.push(h(n.parts[o]));s[n.id]={id:n.id,refs:1,parts:a}}}}function y(){var e=document.createElement("style");return e.type="text/css",a.appendChild(e),e}function h(e){var t,n,i=document.querySelector("style["+d+'~="'+e.id+'"]');if(i){if(c)return g;i.parentNode.removeChild(i)}if(u){var o=r++;i=l||(l=y()),t=b.bind(null,i,o,!1),n=b.bind(null,i,o,!0)}else i=y(),t=C.bind(null,i),n=function(){i.parentNode.removeChild(i)};return t(e),function(i){if(i){if(i.css===e.css&&i.media===e.media&&i.sourceMap===e.sourceMap)return;t(e=i)}else n()}}var v,w=(v=[],function(e,t){return v[e]=t,v.filter(Boolean).join("\n")});function b(e,t,n,i){var o=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=w(t,o);else{var s=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(s,a[t]):e.appendChild(s)}}function C(e,t){var n=t.css,i=t.media,o=t.sourceMap;if(i&&e.setAttribute("media",i),m.ssrId&&e.setAttribute(d,t.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},WxoW:function(e,t,n){},htEg:function(e,t,n){var i=n("WxoW");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n("SZ7m").default)("3552a502",i,!0,{})},kpiV:function(e,t,n){},mcaA:function(e,t,n){},oFy7:function(e,t,n){var i=n("kpiV");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n("SZ7m").default)("61cb32a5",i,!0,{})},xdAn:function(e,t,n){var i=n("4tY2");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n("SZ7m").default)("79432077",i,!0,{})}});