!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/bundles/moorlcmsshopthelook/",n(n.s="mH37")}({"+q8x":function(e,t,n){},"3LMS":function(e,t,n){var o=n("BMlB");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,n("SZ7m").default)("61a6a434",o,!0,{})},APYj:function(e,t,n){},BMlB:function(e,t,n){},IfyH:function(e,t,n){var o=n("APYj");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,n("SZ7m").default)("5866e745",o,!0,{})},SZ7m:function(e,t,n){"use strict";function o(e,t){for(var n=[],o={},i=0;i<t.length;i++){var a=t[i],r=a[0],s={id:e+":"+i,css:a[1],media:a[2],sourceMap:a[3]};o[r]?o[r].parts.push(s):n.push(o[r]={id:r,parts:[s]})}return n}n.r(t),n.d(t,"default",(function(){return f}));var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},r=i&&(document.head||document.getElementsByTagName("head")[0]),s=null,l=0,c=!1,d=function(){},u=null,p="data-vue-ssr-id",m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(e,t,n,i){c=n,u=i||{};var r=o(e,t);return v(r),function(t){for(var n=[],i=0;i<r.length;i++){var s=r[i];(l=a[s.id]).refs--,n.push(l)}t?v(r=o(e,t)):r=[];for(i=0;i<n.length;i++){var l;if(0===(l=n[i]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete a[l.id]}}}}function v(e){for(var t=0;t<e.length;t++){var n=e[t],o=a[n.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](n.parts[i]);for(;i<n.parts.length;i++)o.parts.push(g(n.parts[i]));o.parts.length>n.parts.length&&(o.parts.length=n.parts.length)}else{var r=[];for(i=0;i<n.parts.length;i++)r.push(g(n.parts[i]));a[n.id]={id:n.id,refs:1,parts:r}}}}function h(){var e=document.createElement("style");return e.type="text/css",r.appendChild(e),e}function g(e){var t,n,o=document.querySelector("style["+p+'~="'+e.id+'"]');if(o){if(c)return d;o.parentNode.removeChild(o)}if(m){var i=l++;o=s||(s=h()),t=y.bind(null,o,i,!1),n=y.bind(null,o,i,!0)}else o=h(),t=x.bind(null,o),n=function(){o.parentNode.removeChild(o)};return t(e),function(o){if(o){if(o.css===e.css&&o.media===e.media&&o.sourceMap===e.sourceMap)return;t(e=o)}else n()}}var b,w=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function y(e,t,n,o){var i=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=w(t,i);else{var a=document.createTextNode(i),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(a,r[t]):e.appendChild(a)}}function x(e,t){var n=t.css,o=t.media,i=t.sourceMap;if(o&&e.setAttribute("media",o),u.ssrId&&e.setAttribute(p,t.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},bobI:function(e,t,n){},en66:function(e,t,n){var o=n("+q8x");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,n("SZ7m").default)("dd187d3a",o,!0,{})},ksGb:function(e,t,n){var o=n("bobI");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,n("SZ7m").default)("b161fd4c",o,!0,{})},mH37:function(e,t,n){"use strict";n.r(t);n("IfyH");Shopware.Component.register("sw-cms-block-moorl-shop-the-look",{template:'<div class="sw-cms-block-moorl-shop-the-look">\n    <slot name="one"></slot>\n</div>\n'});n("ksGb");Shopware.Component.register("sw-cms-preview-moorl-shop-the-look",{template:'<div class="sw-cms-preview-moorl-shop-the-look">\n    <div class="sw-cms-el-preview-moorl-shop-the-look">\n        <img :src="\'/administration/static/img/cms/preview_mountain_small.jpg\' | asset">\n        <div class="container">\n            <div class="container-icon">\n                <i class="fas fa-bullseye"></i>\n            </div>\n        </div>\n    </div>\n</div>\n'}),Shopware.Service("cmsService").registerCmsBlock({name:"moorl-shop-the-look",label:"moorl-cms.blocks.general.shopTheLook.label",category:"moorl-cms-old",component:"sw-cms-block-moorl-shop-the-look",previewComponent:"sw-cms-preview-moorl-shop-the-look",defaultConfig:{marginBottom:"20px",marginTop:"20px",marginLeft:"20px",marginRight:"20px",sizingMode:"boxed"},slots:{one:{type:"moorl-shop-the-look"}}});n("3LMS");var o=Shopware,i=o.Component,a=(o.Application,o.Mixin);i.register("sw-cms-el-moorl-shop-the-look",{template:'<div class="sw-cms-el-moorl-shop-the-look"\n     :class="element.config.style.value"\n     :style="itemCss">\n    <div class="hotspot-area">\n        <div class="hotspot-area-image">\n            <video v-if="element.config.videoActive.value"\n                   autoplay\n                   muted\n                   loop\n                   class="video">\n                <source :src="mediaUrl" type="video/mp4">\n            </video>\n\n            <img v-else :src="mediaUrl">\n\n            <div class="hotspot-area-image-overlay" ref="hotspotArea">\n                <template v-if="element.data.products">\n                    <div v-if="element.config.productMediaHotspots.value[product.id]"\n                         v-for="product in element.data.products"\n                         :style="pointerPositionCss(product.id)"\n                         class="hotspot-area-image-overlay-dot"\n                         v-tooltip="{message: product.translated.name, position: \'top\'}">\n                    </div>\n                </template>\n            </div>\n        </div>\n    </div>\n\n    <div class="product-list">\n        <sw-cms-el-moorl-product-buy-list v-bind="{ element }"/>\n    </div>\n</div>\n',mixins:[a.getByName("cms-element")],computed:{mediaUrl:function(){var e=Shopware.Context.api,t=this.element.data.media;return t&&t.id?t.url:t&&t.url?"".concat(e.assetsPath).concat(t.url):"".concat(e.assetsPath,"/administration/static/img/cms/preview_mountain_large.jpg")},priceTotal:function(){var e=this.element.data.products,t=0;return e&&e&&e.forEach((function(e){e.price&&(t+=e.price[0].gross)})),t},itemCss:function(){return{"--products-width":this.element.config.productsWidth.value}}},watch:{cmsPageState:{deep:!0,handler:function(){this.$forceUpdate()}}},created:function(){this.createdComponent()},methods:{createdComponent:function(){this.initElementConfig("moorl-shop-the-look"),this.initElementData("moorl-shop-the-look")},pointerPositionCss:function(e){try{return this.element.config.productMediaHotspots.value[e].top=parseInt(this.element.config.productMediaHotspots.value[e].top),this.element.config.productMediaHotspots.value[e].left=parseInt(this.element.config.productMediaHotspots.value[e].left),{top:this.element.config.productMediaHotspots.value[e].top+"%",left:this.element.config.productMediaHotspots.value[e].left+"%"}}catch(e){return{}}}},filters:{numberFormat:function(e){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(e)}}});n("en66");function r(e,t,n,o,i,a,r){try{var s=e[a](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,i)}var s=Shopware,l=s.Component,c=s.Mixin,d=Shopware.Data;d.Criteria,d.EntityCollection;function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}l.register("sw-cms-el-config-moorl-shop-the-look",{template:'{% block sw_cms_config_moorl_shop_the_look %}\n    <div class="sw-cms-el-config-moorl-shop-the-look">\n        <sw-tabs defaultItem="general">\n            <template slot-scope="{ active }" >\n                {% block sw_cms_config_moorl_shop_the_look_tabs %}\n                    <sw-tabs-item :title="$tc(snippetPrefix + \'tab.general\')"\n                                  name="general"\n                                  :activeTab="active">\n                        {{ $tc(snippetPrefix + \'tab.general\') }}\n                    </sw-tabs-item>\n\n                    <sw-tabs-item v-if="products"\n                                  :title="$tc(snippetPrefix + \'tab.hotspots\')"\n                                  name="hotspots"\n                                  :activeTab="active">\n                        {{ $tc(snippetPrefix + \'tab.hotspots\') }}\n                    </sw-tabs-item>\n\n                    <sw-tabs-item :title="$tc(snippetPrefix + \'tab.other\')"\n                                  name="other"\n                                  :activeTab="active">\n                        {{ $tc(snippetPrefix + \'tab.other\') }}\n                    </sw-tabs-item>\n                {% endblock %}\n            </template>\n\n            <template slot="content" slot-scope="{ active }">\n                {% block sw_cms_config_moorl_shop_the_look_content %}\n                    <sw-container v-if="active === \'general\'">\n                        <sw-container columns="1fr 1fr" gap="0 10px">\n                            <sw-select-field\n                                    :label="$tc(\'moorl-cms.elements.general.config.label.style\')"\n                                    v-model="element.config.style.value">\n                                <option value="image-products">{{ $tc(snippetPrefix + \'label.imageProducts\') }}</option>\n                                <option value="products-image">{{ $tc(snippetPrefix + \'label.productsImage\') }}</option>\n                                <option value="products">{{ $tc(snippetPrefix + \'label.products\') }}</option>\n                                <option value="image">{{ $tc(snippetPrefix + \'label.image\') }}</option>\n                            </sw-select-field>\n\n                            <sw-text-field\n                                    :label="$tc(snippetPrefix + \'label.productsWidth\')"\n                                    v-model="element.config.productsWidth.value">\n                            </sw-text-field>\n\n                            <sw-field v-model="element.config.enableAnimatedHotspots.value"\n                                      bordered\n                                      type="switch"\n                                      :label="$tc(snippetPrefix + \'label.enableAnimatedHotspots\')">\n                            </sw-field>\n\n                            <sw-field v-model="element.config.videoActive.value"\n                                      bordered\n                                      type="switch"\n                                      :label="$tc(snippetPrefix + \'label.videoActive\')">\n                            </sw-field>\n                        </sw-container>\n\n                        <sw-media-upload-v2 variant="regular"\n                                            :uploadTag="uploadTag"\n                                            :source="previewSource"\n                                            :allowMultiSelect="false"\n                                            :defaultFolder="cmsPageState.pageEntityName"\n                                            :caption="$tc(\'sw-cms.elements.general.config.caption.mediaUpload\')"\n                                            @media-upload-sidebar-open="onOpenMediaModal"\n                                            @media-upload-remove-image="onImageRemove">\n                        </sw-media-upload-v2>\n\n                        <sw-upload-listener\n                                :uploadTag="uploadTag"\n                                autoUpload\n                                @media-upload-finish="onImageUpload">\n                        </sw-upload-listener>\n\n                        <sw-cms-el-config-moorl-product-buy-list\n                                v-bind="{ element }"\n                                @products-change="onProductsChange"\n                        />\n                    </sw-container>\n\n                    <sw-container v-if="products && active === \'hotspots\'">\n                        <div class="hotspots">\n                            <div class="hotspot-area">\n                                <div class="hotspot-area-image">\n                                    <video v-if="element.config.videoActive.value"\n                                           autoplay\n                                           muted\n                                           loop\n                                           class="video">\n                                        <source :src="mediaUrl" type="video/mp4">\n                                    </video>\n\n                                    <img v-else :src="mediaUrl">\n\n                                    <div class="hotspot-area-image-overlay" ref="hotspotArea">\n                                        <template v-if="element.data.products">\n                                            <div v-if="element.config.productMediaHotspots.value[product.id]"\n                                                 v-for="product in element.data.products"\n                                                 :style="pointerPositionCss(product.id)"\n                                                 class="hotspot-area-image-overlay-dot"\n                                                 v-tooltip="{message: product.name, position: \'top\'}">\n                                            </div>\n                                        </template>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="product-list">\n                                <div class="product-list-content">\n                                    <div v-if="element.config.productMediaHotspots.value[product.id]"\n                                         v-for="product in products"\n                                         class="product-list-content-item">\n                                        <div style="grid-area: a;">{{ product.translated.name }}</div>\n\n                                        <sw-field style="grid-area: b;"\n                                                  type="number"\n                                                  min="0"\n                                                  max="100"\n                                                  step="1"\n                                                  :placeholder="$tc(snippetPrefix + \'label.topPosition\')"\n                                                  v-model="element.config.productMediaHotspots.value[product.id].top">\n                                        </sw-field>\n\n                                        <sw-field style="grid-area: c;"\n                                                  type="number"\n                                                  min="0"\n                                                  max="100"\n                                                  step="1"\n                                                  :placeholder="$tc(snippetPrefix + \'label.leftPosition\')"\n                                                  v-model="element.config.productMediaHotspots.value[product.id].left">\n                                        </sw-field>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </sw-container>\n\n                    <sw-container v-if="active === \'other\'">\n                        <sw-container columns="1fr 1fr" gap="0 10px">\n                            <sw-field v-model="element.config.custom1.value"\n                                      :label="$tc(snippetPrefix + \'label.custom1\')">\n                            </sw-field>\n\n                            <sw-field v-model="element.config.custom2.value"\n                                      :label="$tc(snippetPrefix + \'label.custom2\')">\n                            </sw-field>\n\n                            <sw-field v-model="element.config.custom3.value"\n                                      :label="$tc(snippetPrefix + \'label.custom3\')">\n                            </sw-field>\n\n                            <sw-field v-model="element.config.custom4.value"\n                                      :label="$tc(snippetPrefix + \'label.custom4\')">\n                            </sw-field>\n                        </sw-container>\n                    </sw-container>\n                {% endblock %}\n            </template>\n        </sw-tabs>\n\n        <sw-media-modal-v2\n            variant="regular"\n            v-if="mediaModalIsOpen"\n            :caption="$tc(\'sw-cms.elements.general.config.caption.mediaUpload\')"\n            :entityContext="cmsPageState.entityName"\n            :allowMultiSelect="false"\n            :initialFolderId="cmsPageState.defaultMediaFolderId"\n            @media-upload-remove-image="onImageRemove"\n            @media-modal-selection-change="onSelectionChanges"\n            @modal-close="onCloseModal">\n        </sw-media-modal-v2>\n    </div>\n{% endblock %}\n',mixins:[c.getByName("cms-element")],inject:["repositoryFactory"],data:function(){return{mediaModalIsOpen:!1,initialFolderId:null,snippetPrefix:"sw-cms.elements.moorl-shop-the-look."}},computed:{products:function(){return this.element.data&&this.element.data.products&&this.element.data.products.length>0?this.element.data.products:null},mediaRepository:function(){return this.repositoryFactory.create("media")},uploadTag:function(){return"cms-element-media-config-".concat(this.element.id)},previewSource:function(){return this.element.data&&this.element.data.media&&this.element.data.media.id?this.element.data.media:this.element.config.media.value},mediaUrl:function(){var e=Shopware.Context.api,t=this.element.data.media;return t&&t.id?t.url:t&&t.url?"".concat(e.assetsPath).concat(t.url):"".concat(e.assetsPath,"/administration/static/img/cms/preview_mountain_large.jpg")}},created:function(){this.createdComponent()},methods:{createdComponent:function(){var e=this;this.initElementConfig("moorl-shop-the-look"),this.initElementData("moorl-shop-the-look"),"string"==typeof this.previewSource&&this.mediaRepository.get(this.previewSource,Shopware.Context.api).then((function(t){e.element.data.media=t}))},onProductsChange:function(){var e=this;this.element.config.products.value.forEach((function(t){e.element.config.productMediaHotspots.value[t]||(e.element.config.productMediaHotspots.value[t]={top:50,left:50}),e.element.config.productMediaHotspots.value[t].top=parseInt(e.element.config.productMediaHotspots.value[t].top),e.element.config.productMediaHotspots.value[t].left=parseInt(e.element.config.productMediaHotspots.value[t].left)}))},pointerPositionCss:function(e){try{return{top:this.element.config.productMediaHotspots.value[e].top+"%",left:this.element.config.productMediaHotspots.value[e].left+"%"}}catch(e){return{}}},onImageUpload:function(e){var t,n=this;return(t=regeneratorRuntime.mark((function t(){var o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.targetId,t.next=3,n.mediaRepository.get(o,Shopware.Context.api);case 3:i=t.sent,n.element.config.media.value=i.id,n.updateElementData(i);case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function s(e){r(a,o,i,s,l,"next",e)}function l(e){r(a,o,i,s,l,"throw",e)}s(void 0)}))})()},onImageRemove:function(){this.element.config.media.value=null,this.updateElementData()},updateElementData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.$set(this.element.data,"mediaId",null===e?null:e.id),this.$set(this.element.data,"media",e),this.$emit("element-update",this.element)},onCloseModal:function(){this.mediaModalIsOpen=!1},onSelectionChanges:function(e){var t=e[0];this.element.config.media.value=t.id,this.updateElementData(t)},onOpenMediaModal:function(){this.mediaModalIsOpen=!0}}});var h=Shopware.Application,g=Shopware.Data.Criteria,b=new g;b.addAssociation("options.group"),b.addAssociation("cover"),h.getContainer("service").cmsService.registerCmsElement({plugin:"MoorlCmsShopTheLook",icon:"default-shopping-cart",color:"#eebecd",previewComponent:!0,name:"moorl-shop-the-look",label:"sw-cms.elements.moorl-shop-the-look.title",component:"sw-cms-el-moorl-shop-the-look",configComponent:"sw-cms-el-config-moorl-shop-the-look",defaultConfig:{products:{source:"static",value:[],required:!0,entity:{name:"product",criteria:b}},media:{source:"static",value:null,required:!0,entity:{name:"media",criteria:new g}},videoActive:{source:"static",value:!1},custom1:{source:"static",value:""},custom2:{source:"static",value:""},custom3:{source:"static",value:""},custom4:{source:"static",value:""},productMediaHotspots:{source:"static",value:{}},style:{source:"static",value:"image-products"},productsWidth:{source:"static",value:"380px"},enableList:{source:"static",value:!0},enablePrices:{source:"static",value:!0},enableAddToCart:{source:"static",value:!0},enableVariantSwitch:{source:"static",value:!0},enableAddToCartAll:{source:"static",value:!0},enableAddToCartSingle:{source:"static",value:!0},enableDirectUrl:{source:"static",value:!1},enableAnimatedHotspots:{source:"static",value:!0},emptyText:{source:"static",value:"No products available"}},collect:function(e){var t=Object.assign({},Shopware.Context.api,{inheritance:!0}),n={};return Object.keys(e.config).forEach((function(o){if("mapped"!==e.config[o].source&&"product_stream"!==e.config[o].source){var i=e.config[o].entity;if(i&&e.config[o].value){var a=i.name,r=function(e,t){var n=e.config[t].entity,o=e.config[t].value,i={};if(Array.isArray(o)){var a=[];o.length&&o[0].mediaId?o.forEach((function(e){a.push(e.mediaId)})):a.push.apply(a,f(o)),i=p({value:a,key:t},n)}else i=p({value:[o],key:t},n);return i.searchCriteria=n.criteria?n.criteria:new g,i}(e,o);r.searchCriteria.setIds(r.value),r.context=t,n["entity-".concat(a)]=r}}})),n}})}});